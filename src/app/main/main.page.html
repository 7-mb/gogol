<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      API Test
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Tab 2</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-list>
    <ion-item *ngIf="response != ''">
      <pre>Response: {{response}}</pre>
    </ion-item>
    <ion-item size="small">
      <ion-label color="medium" size="small"><small>Lat: {{photoService.currentLat}}, Lon: {{photoService.currentLon}}</small></ion-label>
    </ion-item>
    <ion-item>
      <ion-label color="medium" size="small"><small>URL: {{url}}</small></ion-label>
    </ion-item>
    <ion-item>
      <ion-select [(ngModel)]="api" label="API" placeholder="API" (ionChange)="apiChange($event)">
        <ion-select-option [value]="API.Infoflora">Infoflora</ion-select-option>
        <ion-select-option [value]="API.WSL">WSL</ion-select-option>
        <ion-select-option [value]="API.Local">Local</ion-select-option>
        <ion-note color="medium"></ion-note>
      </ion-select>
    </ion-item>
    <ion-item *ngIf="api === API.Local">
      <ion-input label="Local URL" [(ngModel)]="urlLocal" (change)="setLocalUrl()"></ion-input>
    </ion-item>
    <ion-item *ngIf="false">
      <ion-input label="Host name / IP" [(ngModel)]="host" (change)="setLocalUrl()"></ion-input>
    </ion-item>
    <ion-item *ngIf="false">
      <ion-input label="Port" [(ngModel)]="port" (change)="setLocalUrl()"></ion-input>
    </ion-item>
    <ion-item>
      <ion-input label="Num. Taxon ID" [(ngModel)]="num_taxon_id" type="number"></ion-input>
    </ion-item>
    <ion-item>
      <ion-input label="Req. Taxon ID" [(ngModel)]="req_taxon_id" type="number"></ion-input>
    </ion-item>
  </ion-list>
  <ion-grid>
    <ion-row>
      <ion-col size="6" *ngFor="let photo of photoService.photos; index as position">
        <ion-img [src]="photo.webviewPath"></ion-img>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button (click)="addPhotoToGallery()" [disabled]="photoService.photos.length >= 5 || requestInProgress">
      <ion-icon name="camera"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  <ion-fab vertical="bottom" horizontal="start" slot="fixed">
    <ion-fab-button (click)="submit()" [disabled]="photoService.photos.length == 0 || requestInProgress">
      <ion-icon name="send"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  <ion-fab vertical="bottom" horizontal="center" slot="fixed">
    <ion-fab-button (click)="clear()" [disabled]="photoService.photos.length == 0 || requestInProgress">
      <ion-icon name="close"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
<ion-fab vertical="top" horizontal="end" slot="fixed" *ngIf="requestInProgress">
  <ion-spinner></ion-spinner>
</ion-fab>